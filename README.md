## 在Azure Kubernetes Service上构建Kubeflow Machine Learning 平台

本文内容主要指引机器学习的工程师及专家们如何在Azure Kubernetes Service（AKS）上搭建Kubeflow。

Kubernetes可以通过容器编排pipeline来应对许多计算挑战。从它诞生后，MachineLearning领域的数据科学家及工程师期待并尝试借助Kubernetes来搭建机器学习平台，从而为ML实践带来以下几个优势：

-   计算资源可扩展性

-   GPU 支持

-   多租户

-   数据管理

-   基础设施抽象

 直到Kubeflow的出现，在Kubernetes上部署机器学习平台带来了质的飞跃。
 

###  **Kubeflow背景**

 什么是Kubeflow？
 一开始是谷歌内部运行 TensorFlow 方式的开源，基于名为 TensorFlow
 Extended 的管道。 它最初只是一种在 Kubernetes 上运行 TensorFlow
 作业的更简单方法，但后来扩展为一个多架构、多云框架，用于运行端到端机器学习工作流。

 [Kubeflow](https://www.kubeflow.org/) 是 Kubernetes 的机器学习工具包。

 要使用 Kubeflow，基本工作流程是：

 下载并运行 Kubeflow 部署二进制文件。

 自定义生成的配置文件。

 运行指定的脚本以将您的容器部署到您的特定环境。

 您可以调整配置以选择要用于 ML 工作流每个阶段的平台和服务：

-    数据准备

-    模型训练，

-    预测服务

-    服务管理

 您可以选择在本地、本地或云环境中部署 Kubernetes 工作负载。

### Kubeflow 愿景

Kubeflow 项目致力于使机器学习 (ML) 工作流在 Kubernetes上的部署变得简单、便携和可扩展。我们的目标不是重新创建其他服务，而是提供一种直接的方法，将用于 ML的同类最佳开源系统部署到不同的基础设施。 无论您在何处运行
Kubernetes，都应该能够运行 Kubeflow。Kubeflow的目标是通过让 Kubernetes 做它擅长的事情，使机器学习 (ML)
模型的可扩展性和将它们部署到生产中尽可能简单：

-   在不同的基础设施上轻松、可重复、可移植的部署（例如，在笔记本电脑上进行试验，然后转移到本地集群或云）

-    部署和管理松散耦合的微服务

-    按需扩容

由于 ML从业者使用多种工具，其中一个关键目标是根据用户需求（在合理范围内）定制堆栈，让系统处理"无聊的东西"。虽然我们开始使用的是一组狭窄的技术，但我们正在与许多不同的项目合作以包含额外的工具。最终，我们希望拥有一组简单的清单，在 Kubernetes已经运行的任何地方为您提供易于使用的 ML堆栈，并且可以根据它部署到的集群进行自我配置。

###  **Kubeflow架构**

下图显示了 Kubeflow 作为在 Kubernetes 之上安排 ML 系统组件的平台：

![蓝色屏幕的截图
描述已自动生成](media/kubeflow-overview-platform-diagram.svg)

Kubeflow在[Kubernetes](https://kubernetes.io/)的基础上作为部署，缩放和管理复杂系统的ML系统。

使用 （[Kubeflow配置界面](https://www.kubeflow.org/docs/started/architecture/#interfaces)），您可以指定工作流所需的ML工具。然后，您可以将工作流部署到各种云、本地和本地平台，以进行实验和生产使用。

当您开发和部署 ML 系统时，ML 工作流通常由几个阶段组成。开发 ML系统是一个迭代过程。您需要评估 ML工作流各个阶段的输出，并在必要时对模型和参数应用更改，以确保模型不断产生您需要的结果。

为简单起见，下图按顺序显示了工作流阶段。工作流末尾的箭头指向流程以指示流程的迭代性质：

![图示, 文本
描述已自动生成](media/kubeflow-overview-workflow-diagram-1.svg)



更详细地查看各个阶段：

-   在实验阶段，您根据初始假设开发模型，并迭代地测试和更新模型以产生您正在寻找的结果：

    -   确定您希望机器学习系统解决的问题。

    -   收集和分析训练 ML 模型所需的数据。

    -   选择 ML 框架和算法，并对模型的初始版本进行编码。

    -   试验数据并训练您的模型。

    -   调整模型超参数以确保最有效的处理和最准确的结果。

-   在生产阶段，您将部署一个执行以下过程的系统：

    -   将数据转换为训练系统所需的格式。为确保您的模型在训练和预测期间表现一致，转换过程在实验和生产阶段必须相同。

    -   训练机器学习模型。

    -   为模型提供在线预测或以批处理模式运行。

    -   监控模型的性能，并将结果提供给您的流程以调整或重新训练模型。
